<!DOCTYPE html>
<html>

<head>
  <title>W3.CSS Template</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet"
    href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" href="css/custom.css">


  <style>
    body,
    html {
      height: 100%;
      font-family: "Inconsolata", sans-serif;
    }

    .bgimg {
      background-position: center;
      background-size: cover;
      background-image: url("https://www.w3schools.com/w3images/coffeehouse.jpg");
      min-height: 75%;
    }

    .menu {
      display: none;
    }
  </style>
</head>

<body>

  <!-- top menu -->
  <div class="w3-top">
    <div class="w3-row w3-padding w3-black">
      <div class="w3-col s2">
        <div class="w3-sidebar w3-bar-block w3-border-right w3-black" style="display:none" id="mySidebar">
          <button onclick="w3_close()" class="w3-bar-item w3-large">Close &times;</button>
          <a href="#" class="w3-bar-item w3-button">Link 1</a>
          <a href="#" class="w3-bar-item w3-button">Link 2</a>
          <a href="#" class="w3-bar-item w3-button">Link 3</a>
        </div>
        <div class="w3-black">
          <button class="w3-button w3-black w3-xlarge" onclick="w3_open()">â˜°</button>
        </div>
      </div>
      <div class="w3-col s10">
        <div class="w3-row">
          <div class="w3-col s10">
            <input id="search-form" type="text" class="w3-bar-item w3-input w3-white w3-mobile" placeholder="Search..">
          </div>
          <div class="w3-col s2">
            <button class="w3-bar-item w3-button w3-white w3-mobile" onclick="search()">SEARCH</button>
          </div>
        </div>
      </div>
    </div>
    <div class="w3-row w3-black web-clip slide-tag">
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
      <a href="#tag" class="w3-button w3-black">TAG</a>
    </div>
  </div>

  <!-- bottom menu -->
  <div class="w3-bottom">
    <div class="w3-row w3-padding w3-black">
      <div class="w3-col s6">
        <a href="#home" class="w3-button w3-block w3-black"
          onclick="w3.show('.web-clip'); w3.hide('.web-save')">CLIP</a>
      </div>
      <div class="w3-col s6">
        <a href="#save" class="w3-button w3-block w3-black"
          onclick="w3.hide('.web-clip'); w3.show('.web-save')">SAVE</a>
      </div>
    </div>
  </div>

  <div class="web-clip w3-container w3-margin-left w3-margin-right" style="margin-top: 150px; margin-bottom: 100px;">
    <div id="web-clip-list" class="flex-container">
      <div w3-repeat="clips" class="w3-card ">
        <img src={{img}} alt="Norway" style="width:100%" class="w3-hover-opacity">
        <div>
          <div>
            <p>{{title}}</p>
          </div>
          <div class="corner-bottom-left">
            {{source}}
          </div>
          <div class="corner-bottom-right">
            <a href={{url}} style="text-decoration: none;">
              <span class="material-symbols-outlined">link</span>
            </a>
            <span class="material-symbols-outlined">bookmark</span>
            <span class="material-symbols-outlined">block</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w3-center w3-light-grey w3-padding-48 w3-large">
    <!-- <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-text-green">w3.css</a></p> -->
  </footer>


  <script src="https://www.w3schools.com/lib/w3.js"></script>
  <script src="js/io.js"></script>
  <script>
    w3.getHttpObject("asset/test_data.json", display_clip);
    document.getElementById("search-form")
      .addEventListener("keyup", function (event) {
        event.preventDefault();
        if (event.keyCode === 13) {
          search();
        }
      });

    function display_clip(clips) {
      clips = { "clips": clips };
      console.log(clips)
      w3.displayObject("web-clip-list", clips)
    }

    function search() {

      w3.getHttpObject("asset/test_data.json", display_filter_clip);
    }

    function display_filter_clip(clips) {
      word = document.getElementById("search-form").value;
      word = word.trim();
      if (word !== '') {
        clips = clips.filter(clip => clip.title.includes(word));
      }
      if (clips.length > 0)
        display_clip(clips);
    }

    function w3_open() {
      document.getElementById("mySidebar").style.display = "block";
    }

    function w3_close() {
      document.getElementById("mySidebar").style.display = "none";
    }
  </script>

<script>
  const slider = document.querySelector('.slide-tag');
  let mouseDown = false;
  let startX, scrollLeft;
  
  let startDragging = function (e) {
    mouseDown = true;
    startX = e.pageX - slider.offsetLeft;
    scrollLeft = slider.scrollLeft;
  };
  let stopDragging = function (event) {
    mouseDown = false;
  };
  
  slider.addEventListener('mousemove', (e) => {
    e.preventDefault();
    if(!mouseDown) { return; }
    const x = e.pageX - slider.offsetLeft;
    const scroll = x - startX;
    slider.scrollLeft = scrollLeft - scroll;
  });
  
  
  // Add the event listeners
  slider.addEventListener('mousedown', startDragging, false);
  slider.addEventListener('mouseup', stopDragging, false);
  slider.addEventListener('mouseleave', stopDragging, false);

  slider.addEventListener('touchmove', (e) => {
    e.preventDefault();
    if(!mouseDown) { return; }
      const x = e.changedTouches[0].pageX - slider.offsetLeft;
      const scroll = x - startX;
      slider.scrollLeft = scrollLeft - scroll;
  });
  let startTouching = function (e) {
    mouseDown = true;
      startX = e.changedTouches[0].pageX - slider.offsetLeft;
      scrollLeft = slider.scrollLeft;
  };
  slider.addEventListener('touchstart', startTouching, false);
  slider.addEventListener('touchend', stopDragging, false);
  </script>

</body>

</html>